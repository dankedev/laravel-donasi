import{r as c,R as L,_ as V,J as U,f as $,u as K,j as a,n as E}from"./app-CGQQ-ZlW.js";import{L as O,U as q}from"./upload-feature-image-DYvocgmT.js";import{a as B,u as D,C as y}from"./use-request-B6hVWsKZ.js";import"./date-format-SOUyH_OB.js";import{i as G}from"./helper-wKQdS1hi.js";import{T as w}from"./TextInput-BKP3gcBE.js";import{B as Y}from"./Button-MZvmU7_O.js";import{A as J}from"./ActionIcon-tkPRBpW7.js";import{c as X}from"./createLucideIcon-CacR4Jk6.js";import"./create-safe-context-50zDxaJY.js";import"./is-element-qvA2NJ6b.js";import"./Overlay-Cnr7V7lH.js";import"./Paper-CIYb7ukR.js";var Z={};function Q(){return typeof process<"u"&&Z?"production":"development"}var ee=c.useLayoutEffect,te=function(t){var r=L.useRef(t);return ee(function(){r.current=t}),r},H=function(t,r){if(typeof t=="function"){t(r);return}t.current=r},re=function(t,r){var e=L.useRef();return L.useCallback(function(n){t.current=n,e.current&&H(e.current,null),e.current=r,r&&H(r,n)},[r])},T={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},ie=function(t){Object.keys(T).forEach(function(r){t.style.setProperty(r,T[r],"important")})},_=ie,u=null,I=function(t,r){var e=t.scrollHeight;return r.sizingStyle.boxSizing==="border-box"?e+r.borderSize:e-r.paddingSize};function ne(i,t,r,e){r===void 0&&(r=1),e===void 0&&(e=1/0),u||(u=document.createElement("textarea"),u.setAttribute("tabindex","-1"),u.setAttribute("aria-hidden","true"),_(u)),u.parentNode===null&&document.body.appendChild(u);var n=i.paddingSize,l=i.borderSize,o=i.sizingStyle,f=o.boxSizing;Object.keys(o).forEach(function(m){var x=m;u.style[x]=o[x]}),_(u),u.value=t;var s=I(u,i);u.value=t,s=I(u,i),u.value="x";var d=u.scrollHeight-n,p=d*r;f==="border-box"&&(p=p+n+l),s=Math.max(p,s);var g=d*e;return f==="border-box"&&(g=g+n+l),s=Math.min(g,s),[s,d]}var F=function(){},ae=function(t,r){return t.reduce(function(e,n){return e[n]=r[n],e},{})},oe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],se=!!document.documentElement.currentStyle,ue=function(t){var r=window.getComputedStyle(t);if(r===null)return null;var e=ae(oe,r),n=e.boxSizing;if(n==="")return null;se&&n==="border-box"&&(e.width=parseFloat(e.width)+parseFloat(e.borderRightWidth)+parseFloat(e.borderLeftWidth)+parseFloat(e.paddingRight)+parseFloat(e.paddingLeft)+"px");var l=parseFloat(e.paddingBottom)+parseFloat(e.paddingTop),o=parseFloat(e.borderBottomWidth)+parseFloat(e.borderTopWidth);return{sizingStyle:e,paddingSize:l,borderSize:o}},de=ue;function N(i,t,r){var e=te(r);c.useLayoutEffect(function(){var n=function(o){return e.current(o)};if(i)return i.addEventListener(t,n),function(){return i.removeEventListener(t,n)}},[])}var le=function(t){N(window,"resize",t)},ce=function(t){N(document.fonts,"loadingdone",t)},fe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],pe=function(t,r){var e=t.cacheMeasurements,n=t.maxRows,l=t.minRows,o=t.onChange,f=o===void 0?F:o,s=t.onHeightChange,d=s===void 0?F:s,p=V(t,fe),g=p.value!==void 0,m=c.useRef(null),x=re(m,r),C=c.useRef(0),S=c.useRef(),v=function(){var h=m.current,z=e&&S.current?S.current:de(h);if(z){S.current=z;var j=ne(z,h.value||h.placeholder||"x",l,n),b=j[0],M=j[1];C.current!==b&&(C.current=b,h.style.setProperty("height",b+"px","important"),d(b,{rowHeight:M}))}},P=function(h){g||v(),f(h)};return c.useLayoutEffect(v),le(v),ce(v),c.createElement("textarea",U({},p,{onChange:P,ref:x}))},he=c.forwardRef(pe);const ge={},R=$((i,t)=>{const{autosize:r,maxRows:e,minRows:n,__staticSelector:l,resize:o,...f}=K("Textarea",ge,i),s=r&&Q()!=="test",d=s?{maxRows:e,minRows:n}:{};return a.jsx(B,{component:s?he:"textarea",ref:t,...f,__staticSelector:l||"Textarea",multiline:!0,"data-no-overflow":r&&e===void 0||void 0,__vars:{"--input-resize":o},...d})});R.classes=B.classes;R.displayName="@mantine/core/Textarea";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=X("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);function W(i,t){if(typeof i=="number")return t.length===i;const{max:r,min:e}=i;let n=!0;return typeof r=="number"&&t.length>r&&(n=!1),typeof e=="number"&&t.length<e&&(n=!1),n}function k(i,t){const r=t||!0;return e=>typeof e=="string"?W(i,e.trim())?null:r:typeof e=="object"&&e!==null&&"length"in e&&W(i,e)?null:r}function Te({category:i}){var l,o,f,s;const[t,r]=c.useState(!1),e=D({initialValues:i,validate:{name:k({min:2,max:30},"Name must be 2-30 characters long"),slug:k({min:2,max:30},"Slug wajib diisi")}});c.useEffect(()=>{i!=null&&i.id&&G(i).then(d=>{e.setValues(d),r(!0)}).then(()=>r(!1))},[i]);const n=d=>{d.id?e.patch(route("admin.campaign.category.update"),{onSuccess:()=>{E.show({title:"Category Update",message:"Category berhasil diupdate",color:"blue"}),e.reset()}}):e.post(route("admin.campaign.category.save"),{onSuccess:()=>{E.show({title:"Category Created",message:"Category berhasil disimpan",color:"green"}),e.reset()}})};return a.jsxs(y,{shadow:"lg",children:[a.jsx(y.Section,{px:"xl",py:"md",withBorder:!0,bg:"gray.0",fw:"bold",fz:"lg",children:(l=e.values)!=null&&l.id?a.jsxs("div",{children:["Edit Kategori ",a.jsx("strong",{className:"text-blue-500",children:i==null?void 0:i.name})]}):"Buat Kategori"}),a.jsxs(y.Section,{px:"xl",py:"md",children:[a.jsx(O,{visible:t}),a.jsx("form",{onSubmit:e.onSubmit(n),children:a.jsxs("div",{className:"flex flex-col gap-6",children:[a.jsx(w,{label:"Nama Kategori",size:"lg",...e.getInputProps("name")}),a.jsx(w,{label:"Slug",size:"lg",...e.getInputProps("slug")}),a.jsx(R,{autosize:!0,label:"Deskripsi",size:"lg",...e.getInputProps("description")}),a.jsx(w,{label:"Blog URL",size:"lg",...e.getInputProps("url")}),a.jsx(q,{directory:"category",onSetValue:d=>{e.setFieldValue("featured_id",d)},postId:Number((o=e==null?void 0:e.values)==null?void 0:o.id),placeholder:"Disarankan 650x650px atau 1x1",currentImageUrl:(s=(f=e.values)==null?void 0:f.featured_image)==null?void 0:s.url}),a.jsxs("div",{className:"flex w-full items-center gap-4",children:[a.jsx(Y,{type:"submit",size:"lg",fullWidth:!0,children:"Buat Kategori"}),a.jsx(J,{variant:"outline",size:"xl",type:"reset",onClick:()=>e.setValues({id:null,name:"",slug:"",description:"",url:"",featured_id:null}),children:a.jsx(me,{size:20})})]})]})})]})]})}export{Te as FormCategory};
