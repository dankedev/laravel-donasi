import{r as l,_ as M,J as V,f as U,u as $,j as a,n as j}from"./app-BUxkjKGP.js";import{L as K,U as O}from"./upload-feature-image-C90JjbUJ.js";import{a as k,u as q,C as y}from"./use-request-BZVJs3yD.js";import"./date-format-BgiflSdS.js";import{i as D}from"./helper-BqAvaLwA.js";import{T as w}from"./TextInput-JqgoZw82.js";import{B as G}from"./Button-Dbs9TnWX.js";import{A as Y}from"./ActionIcon-Bd0EAu6u.js";import{c as J}from"./createLucideIcon-C_yBs1uR.js";import"./create-safe-context-jcT3M2lv.js";import"./is-element-B3pJ_WKP.js";import"./Overlay-Bi0buhAS.js";import"./Paper-C0H4_VJZ.js";var X={};function Z(){return typeof process<"u"&&X?"production":"development"}var Q=l.useLayoutEffect,ee=function(t){var r=l.useRef(t);return Q(function(){r.current=t}),r},E=function(t,r){if(typeof t=="function"){t(r);return}t.current=r},te=function(t,r){var e=l.useRef();return l.useCallback(function(n){t.current=n,e.current&&E(e.current,null),e.current=r,r&&E(r,n)},[r])},H={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},re=function(t){Object.keys(H).forEach(function(r){t.style.setProperty(r,H[r],"important")})},T=re,u=null,_=function(t,r){var e=t.scrollHeight;return r.sizingStyle.boxSizing==="border-box"?e+r.borderSize:e-r.paddingSize};function ie(i,t,r,e){r===void 0&&(r=1),e===void 0&&(e=1/0),u||(u=document.createElement("textarea"),u.setAttribute("tabindex","-1"),u.setAttribute("aria-hidden","true"),T(u)),u.parentNode===null&&document.body.appendChild(u);var n=i.paddingSize,c=i.borderSize,o=i.sizingStyle,f=o.boxSizing;Object.keys(o).forEach(function(m){var x=m;u.style[x]=o[x]}),T(u),u.value=t;var s=_(u,i);u.value=t,s=_(u,i),u.value="x";var d=u.scrollHeight-n,p=d*r;f==="border-box"&&(p=p+n+c),s=Math.max(p,s);var g=d*e;return f==="border-box"&&(g=g+n+c),s=Math.min(g,s),[s,d]}var I=function(){},ne=function(t,r){return t.reduce(function(e,n){return e[n]=r[n],e},{})},ae=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],oe=!!document.documentElement.currentStyle,se=function(t){var r=window.getComputedStyle(t);if(r===null)return null;var e=ne(ae,r),n=e.boxSizing;if(n==="")return null;oe&&n==="border-box"&&(e.width=parseFloat(e.width)+parseFloat(e.borderRightWidth)+parseFloat(e.borderLeftWidth)+parseFloat(e.paddingRight)+parseFloat(e.paddingLeft)+"px");var c=parseFloat(e.paddingBottom)+parseFloat(e.paddingTop),o=parseFloat(e.borderBottomWidth)+parseFloat(e.borderTopWidth);return{sizingStyle:e,paddingSize:c,borderSize:o}},ue=se;function B(i,t,r){var e=ee(r);l.useLayoutEffect(function(){var n=function(o){return e.current(o)};if(i)return i.addEventListener(t,n),function(){return i.removeEventListener(t,n)}},[])}var de=function(t){B(window,"resize",t)},le=function(t){B(document.fonts,"loadingdone",t)},ce=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],fe=function(t,r){var e=t.cacheMeasurements,n=t.maxRows,c=t.minRows,o=t.onChange,f=o===void 0?I:o,s=t.onHeightChange,d=s===void 0?I:s,p=M(t,ce),g=p.value!==void 0,m=l.useRef(null),x=te(m,r),C=l.useRef(0),S=l.useRef(),v=function(){var h=m.current,z=e&&S.current?S.current:ue(h);if(z){S.current=z;var R=ie(z,h.value||h.placeholder||"x",c,n),b=R[0],A=R[1];C.current!==b&&(C.current=b,h.style.setProperty("height",b+"px","important"),d(b,{rowHeight:A}))}},N=function(h){g||v(),f(h)};return l.useLayoutEffect(v),de(v),le(v),l.createElement("textarea",V({},p,{onChange:N,ref:x}))},pe=l.forwardRef(fe);const he={},L=U((i,t)=>{const{autosize:r,maxRows:e,minRows:n,__staticSelector:c,resize:o,...f}=$("Textarea",he,i),s=r&&Z()!=="test",d=s?{maxRows:e,minRows:n}:{};return a.jsx(k,{component:s?pe:"textarea",ref:t,...f,__staticSelector:c||"Textarea",multiline:!0,"data-no-overflow":r&&e===void 0||void 0,__vars:{"--input-resize":o},...d})});L.classes=k.classes;L.displayName="@mantine/core/Textarea";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=J("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);function F(i,t){if(typeof i=="number")return t.length===i;const{max:r,min:e}=i;let n=!0;return typeof r=="number"&&t.length>r&&(n=!1),typeof e=="number"&&t.length<e&&(n=!1),n}function W(i,t){const r=t||!0;return e=>typeof e=="string"?F(i,e.trim())?null:r:typeof e=="object"&&e!==null&&"length"in e&&F(i,e)?null:r}function He({category:i}){var c,o,f,s;const[t,r]=l.useState(!1),e=q({initialValues:i,validate:{name:W({min:2,max:30},"Name must be 2-30 characters long"),slug:W({min:2,max:30},"Slug wajib diisi")}});l.useEffect(()=>{i!=null&&i.id&&D(i).then(d=>{e.setValues(d),r(!0)}).then(()=>r(!1))},[i]);const n=d=>{d.id?e.patch(route("admin.campaign.category.update"),{onSuccess:()=>{j.show({title:"Category Update",message:"Category berhasil diupdate",color:"blue"}),e.reset()}}):e.post(route("admin.campaign.category.save"),{onSuccess:()=>{j.show({title:"Category Created",message:"Category berhasil disimpan",color:"green"}),e.reset()}})};return a.jsxs(y,{shadow:"lg",children:[a.jsx(y.Section,{px:"xl",py:"md",withBorder:!0,bg:"gray.0",fw:"bold",fz:"lg",children:(c=e.values)!=null&&c.id?a.jsxs("div",{children:["Edit Kategori ",a.jsx("strong",{className:"text-blue-500",children:i==null?void 0:i.name})]}):"Buat Kategori"}),a.jsxs(y.Section,{px:"xl",py:"md",children:[a.jsx(K,{visible:t}),a.jsx("form",{onSubmit:e.onSubmit(n),children:a.jsxs("div",{className:"flex flex-col gap-6",children:[a.jsx(w,{label:"Nama Kategori",size:"lg",...e.getInputProps("name")}),a.jsx(w,{label:"Slug",size:"lg",...e.getInputProps("slug")}),a.jsx(L,{autosize:!0,label:"Deskripsi",size:"lg",...e.getInputProps("description")}),a.jsx(w,{label:"Blog URL",size:"lg",...e.getInputProps("url")}),a.jsx(O,{directory:"category",onSetValue:d=>{e.setFieldValue("featured_id",d)},postId:Number((o=e==null?void 0:e.values)==null?void 0:o.id),placeholder:"Disarankan 650x650px atau 1x1",currentImageUrl:(s=(f=e.values)==null?void 0:f.featured_image)==null?void 0:s.url}),a.jsxs("div",{className:"flex w-full items-center gap-4",children:[a.jsx(G,{type:"submit",size:"lg",fullWidth:!0,children:"Buat Kategori"}),a.jsx(Y,{variant:"outline",size:"xl",type:"reset",onClick:()=>e.setValues({id:null,name:"",slug:"",description:"",url:"",featured_id:null}),children:a.jsx(ge,{size:20})})]})]})})]})]})}export{He as FormCategory};
