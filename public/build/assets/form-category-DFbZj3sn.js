import{r as c,R as w,_ as M,V as U,f as $,e as K,j as a,B as O,L as E}from"./app-CognApPA.js";import{a as B,c as q,C as y,L as D,T as L,U as G}from"./use-request-BFJ8wlCl.js";import"./date-format-DT2J0xB7.js";import{i as Y,A as X}from"./helper-BBJRdTc0.js";import{c as Z}from"./createLucideIcon-DlenjaRw.js";var J={};function Q(){return typeof process<"u"&&J?"production":"development"}var ee=c.useLayoutEffect,te=function(t){var r=w.useRef(t);return ee(function(){r.current=t}),r},H=function(t,r){if(typeof t=="function"){t(r);return}t.current=r},re=function(t,r){var e=w.useRef();return w.useCallback(function(i){t.current=i,e.current&&H(e.current,null),e.current=r,r&&H(r,i)},[r])},T={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},ne=function(t){Object.keys(T).forEach(function(r){t.style.setProperty(r,T[r],"important")})},_=ne,u=null,I=function(t,r){var e=t.scrollHeight;return r.sizingStyle.boxSizing==="border-box"?e+r.borderSize:e-r.paddingSize};function ie(n,t,r,e){r===void 0&&(r=1),e===void 0&&(e=1/0),u||(u=document.createElement("textarea"),u.setAttribute("tabindex","-1"),u.setAttribute("aria-hidden","true"),_(u)),u.parentNode===null&&document.body.appendChild(u);var i=n.paddingSize,l=n.borderSize,o=n.sizingStyle,f=o.boxSizing;Object.keys(o).forEach(function(m){var x=m;u.style[x]=o[x]}),_(u),u.value=t;var s=I(u,n);u.value=t,s=I(u,n),u.value="x";var d=u.scrollHeight-i,h=d*r;f==="border-box"&&(h=h+i+l),s=Math.max(h,s);var p=d*e;return f==="border-box"&&(p=p+i+l),s=Math.min(p,s),[s,d]}var F=function(){},ae=function(t,r){return t.reduce(function(e,i){return e[i]=r[i],e},{})},oe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],se=!!document.documentElement.currentStyle,ue=function(t){var r=window.getComputedStyle(t);if(r===null)return null;var e=ae(oe,r),i=e.boxSizing;if(i==="")return null;se&&i==="border-box"&&(e.width=parseFloat(e.width)+parseFloat(e.borderRightWidth)+parseFloat(e.borderLeftWidth)+parseFloat(e.paddingRight)+parseFloat(e.paddingLeft)+"px");var l=parseFloat(e.paddingBottom)+parseFloat(e.paddingTop),o=parseFloat(e.borderBottomWidth)+parseFloat(e.borderTopWidth);return{sizingStyle:e,paddingSize:l,borderSize:o}},de=ue;function N(n,t,r){var e=te(r);c.useLayoutEffect(function(){var i=function(o){return e.current(o)};if(n)return n.addEventListener(t,i),function(){return n.removeEventListener(t,i)}},[])}var le=function(t){N(window,"resize",t)},ce=function(t){N(document.fonts,"loadingdone",t)},fe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],he=function(t,r){var e=t.cacheMeasurements,i=t.maxRows,l=t.minRows,o=t.onChange,f=o===void 0?F:o,s=t.onHeightChange,d=s===void 0?F:s,h=M(t,fe),p=h.value!==void 0,m=c.useRef(null),x=re(m,r),C=c.useRef(0),S=c.useRef(),v=function(){var g=m.current,z=e&&S.current?S.current:de(g);if(z){S.current=z;var j=ie(z,g.value||g.placeholder||"x",l,i),b=j[0],V=j[1];C.current!==b&&(C.current=b,g.style.setProperty("height",b+"px","important"),d(b,{rowHeight:V}))}},P=function(g){p||v(),f(g)};return c.useLayoutEffect(v),le(v),ce(v),c.createElement("textarea",U({},h,{onChange:P,ref:x}))},ge=c.forwardRef(he);const pe={},R=$((n,t)=>{const{autosize:r,maxRows:e,minRows:i,__staticSelector:l,resize:o,...f}=K("Textarea",pe,n),s=r&&Q()!=="test",d=s?{maxRows:e,minRows:i}:{};return a.jsx(B,{component:s?ge:"textarea",ref:t,...f,__staticSelector:l||"Textarea",multiline:!0,"data-no-overflow":r&&e===void 0||void 0,__vars:{"--input-resize":o},...d})});R.classes=B.classes;R.displayName="@mantine/core/Textarea";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=Z("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);function W(n,t){if(typeof n=="number")return t.length===n;const{max:r,min:e}=n;let i=!0;return typeof r=="number"&&t.length>r&&(i=!1),typeof e=="number"&&t.length<e&&(i=!1),i}function k(n,t){const r=t||!0;return e=>typeof e=="string"?W(n,e.trim())?null:r:typeof e=="object"&&e!==null&&"length"in e&&W(n,e)?null:r}function ye({category:n}){var l,o,f,s;const[t,r]=c.useState(!1),e=q({initialValues:n,validate:{name:k({min:2,max:30},"Name must be 2-30 characters long"),slug:k({min:2,max:30},"Slug wajib diisi")}});c.useEffect(()=>{n!=null&&n.id&&Y(n).then(d=>{e.setValues(d),r(!0)}).then(()=>r(!1))},[n]);const i=d=>{d.id?e.patch(route("admin.campaign.category.update"),{onSuccess:()=>{E.show({title:"Category Update",message:"Category berhasil diupdate",color:"blue"}),e.reset()}}):e.post(route("admin.campaign.category.save"),{onSuccess:()=>{E.show({title:"Category Created",message:"Category berhasil disimpan",color:"green"}),e.reset()}})};return a.jsxs(y,{shadow:"lg",children:[a.jsx(y.Section,{px:"xl",py:"md",withBorder:!0,bg:"gray.0",fw:"bold",fz:"lg",children:(l=e.values)!=null&&l.id?a.jsxs("div",{children:["Edit Kategori ",a.jsx("strong",{className:"text-blue-500",children:n==null?void 0:n.name})]}):"Buat Kategori"}),a.jsxs(y.Section,{px:"xl",py:"md",children:[a.jsx(D,{visible:t}),a.jsx("form",{onSubmit:e.onSubmit(i),children:a.jsxs("div",{className:"flex flex-col gap-6",children:[a.jsx(L,{label:"Nama Kategori",size:"lg",...e.getInputProps("name")}),a.jsx(L,{label:"Slug",size:"lg",...e.getInputProps("slug")}),a.jsx(R,{autosize:!0,label:"Deskripsi",size:"lg",...e.getInputProps("description")}),a.jsx(L,{label:"Blog URL",size:"lg",...e.getInputProps("url")}),a.jsx(G,{directory:"category",onSetValue:d=>{e.setFieldValue("featured_id",d)},postId:Number((o=e==null?void 0:e.values)==null?void 0:o.id),placeholder:"Disarankan 650x650px atau 1x1",currentImageUrl:(s=(f=e.values)==null?void 0:f.featured_image)==null?void 0:s.url}),a.jsxs("div",{className:"flex w-full items-center gap-4",children:[a.jsx(O,{type:"submit",size:"lg",fullWidth:!0,children:"Buat Kategori"}),a.jsx(X,{variant:"outline",size:"xl",type:"reset",onClick:()=>e.setValues({id:null,name:"",slug:"",description:"",url:"",featured_id:null}),children:a.jsx(me,{size:20})})]})]})})]})]})}export{ye as FormCategory};
